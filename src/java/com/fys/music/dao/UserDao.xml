<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.fys.music.dao.UserDao">

    <!--插入一条数据到数据库-->
    <insert id="insertUser" parameterType="User">
        insert into fmusic.user (username, password, email, url, state, sex, age, phone, birthday, hobby, address) values (#{username},#{password}, #{email}, #{url}, #{state}, #{sex}, #{age}, #{phone}, #{birthday}, #{hobby}, #{address})
    </insert>


    <!--通过用户名查询用户是否存在-->
    <select id="selectByUsername" parameterType="String" resultType="String">
        select username from fmusic.user where username = #{username}
    </select>

    <!--通过用户名查询密码，用于登陆-->
    <select id="selectPasswordByUsername" parameterType="String" resultType="String">
        select password from fmusic.user where username = #{username}
    </select>

    <!--根据url查询用户-->
    <select id="selectByUrl" parameterType="String" resultType="User">
        select * from user where url = #{url}
    </select>

    <!--根据用户名查询状态-->
    <select id="selectState" parameterType="String" resultType="Integer">
        select state from user where username = #{username}
    </select>

    <!--激活用户-->
    <update id="updateState" parameterType="String">
        update user set state = 1 where url = #{url}
    </update>
    
    <!--查询邮箱是否已经被使用-->
    <select id="selectMailIsExist" parameterType="String" resultType="String">
        select email from user where email = #{email}
    </select>

    <!--查询所有磁力链-->
    <select id="selectResource" resultType="Resource">
        select id, magnet from resource
    </select>

    <!--分页查询磁力链-->
    <select id="selectResourceByPage" resultType="Resource">
        select id, magnet from resource limit #{currentPage},#{pageSize}
    </select>
</mapper>